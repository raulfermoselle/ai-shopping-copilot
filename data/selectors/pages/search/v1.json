{
  "schemaVersion": "1.0.0",
  "page": "search",
  "version": 1,
  "urlPattern": "^https://(www\\.)?auchan\\.pt/pt/(pesquisa|search)",
  "lastValidated": "2026-01-14T06:19:44Z",
  "notes": "VERIFIED: Product search results page. Shows grid of product tiles with search query, filters, and pagination. URL format: /pt/pesquisa?q={query}. Captured 24 products in 'leite' search with full data-urls and data-gtm attributes.",
  "selectors": {
    "searchInput": {
      "name": "Search input field",
      "primary": "input[name='q']",
      "fallbacks": [
        "#search-suggestions-input",
        ".auc-search-field",
        "input.search-field[type='text']"
      ],
      "score": 95,
      "reason": "name attribute is stable, with ID and class fallbacks",
      "verified": true,
      "notes": "Main search input in header. Has autocomplete functionality with aria-autocomplete='list'.",
      "dataAttributes": ["aria-label", "aria-autocomplete", "role", "aria-controls"]
    },
    "resultsContainer": {
      "name": "Search results container",
      "primary": ".product-grid",
      "fallbacks": [
        "[itemtype='http://schema.org/SomeProducts']",
        ".justify-content-start.product-grid"
      ],
      "score": 90,
      "reason": "Semantic class with schema.org fallback verified",
      "verified": true,
      "notes": "Main container for all product search results. Has itemtype schema.org/SomeProducts."
    },
    "resultsCount": {
      "name": "Results count text",
      "primary": ".search-result-count",
      "fallbacks": [
        ".auc-search-results",
        ".auc-js-search-results-count"
      ],
      "score": 70,
      "reason": "Semantic class naming",
      "verified": true,
      "notes": "Displays total number of results (e.g., '1,059 resultados para:')"
    },
    "searchKeywords": {
      "name": "Search query display",
      "primary": ".search-keywords",
      "fallbacks": [
        "h1 .search-keywords"
      ],
      "score": 70,
      "reason": "Semantic class naming",
      "verified": true,
      "notes": "Displays the search query string (e.g., '\"leite\"')"
    },
    "productTile": {
      "name": "Individual product card",
      "primary": ".product-tile[data-pid]",
      "fallbacks": [
        ".auc-product-tile[data-pid]",
        "[data-pid]:has(.auc-product-tile__name)"
      ],
      "score": 95,
      "reason": "data-pid attribute is stable and unique identifier",
      "verified": true,
      "notes": "Individual product card. Has data-pid, data-urls (JSON with endpoints), data-gtm (JSON with tracking), data-position. Full class: 'product-tile auc-product-tile auc-js-product-tile'.",
      "dataAttributes": ["data-pid", "data-urls", "data-gtm", "data-gtm-new", "data-position", "data-producttype"]
    },
    "productId": {
      "name": "Product ID attribute",
      "primary": "[data-pid]",
      "fallbacks": [],
      "score": 95,
      "reason": "Data attribute (highly stable)",
      "verified": true,
      "notes": "Extract using element.getAttribute('data-pid'). Unique product identifier."
    },
    "productName": {
      "name": "Product name/title",
      "primary": ".auc-product-tile__name",
      "fallbacks": [
        ".auc-product-tile .product-name"
      ],
      "score": 80,
      "reason": "BEM element naming",
      "verified": true,
      "notes": "Product name text within product tile"
    },
    "productImageContainer": {
      "name": "Product image container",
      "primary": ".auc-product-tile__image-container",
      "fallbacks": [
        ".product-image"
      ],
      "score": 75,
      "reason": "BEM element naming",
      "verified": true,
      "notes": "Container for product image and link to product detail page"
    },
    "productImage": {
      "name": "Product image",
      "primary": ".auc-product-tile__image-container__image img",
      "fallbacks": [
        ".auc-product-tile img[alt]"
      ],
      "score": 75,
      "reason": "BEM descendant with semantic fallback",
      "verified": true,
      "notes": "Product image element. Check alt and src attributes."
    },
    "productLink": {
      "name": "Link to product detail page",
      "primary": ".auc-product-tile__image-container a",
      "fallbacks": [
        ".auc-product-tile__name a",
        ".auc-product-tile a[href*='/produtos/']"
      ],
      "score": 75,
      "reason": "Structural selector with URL pattern fallback",
      "verified": true,
      "notes": "Link to product detail page. URL format: /pt/alimentacao/.../product-slug/{pid}.html"
    },
    "productPriceContainer": {
      "name": "Price information container",
      "primary": ".auc-product-tile__prices",
      "fallbacks": [
        ".price-container"
      ],
      "score": 75,
      "reason": "BEM element naming",
      "verified": true,
      "notes": "Container for all price-related information"
    },
    "productPrice": {
      "name": "Current/main price",
      "primary": ".auc-price__no-list .value",
      "fallbacks": [
        ".auc-product-tile__prices .price .value",
        ".auc-product-tile__prices .value"
      ],
      "score": 85,
      "reason": "Nested class pattern verified in snapshot",
      "verified": true,
      "notes": "Actual selling price element. Format: '0,86 €'. Within .auc-product-tile__prices container."
    },
    "productPricePromo": {
      "name": "Promotional price",
      "primary": ".auc-price__promotion .value",
      "fallbacks": [
        ".price-promotion .value",
        ".auc-product-tile__prices .promotion .value"
      ],
      "score": 85,
      "reason": "Promotion class pattern verified",
      "verified": true,
      "notes": "Promotional/discounted price if applicable. Shows strikethrough or special styling."
    },
    "productPriceUnit": {
      "name": "Unit price (per kg/L)",
      "primary": ".auc-measures--price-per-unit",
      "fallbacks": [
        ".price-per-unit",
        ".unit-price"
      ],
      "score": 80,
      "reason": "BEM class verified in snapshot",
      "verified": true,
      "notes": "Unit price for comparison (e.g., '€0,86/L'). Below main price."
    },
    "productRating": {
      "name": "Product rating/reviews",
      "primary": ".auc-product-tile__bazaarvoice--ratings",
      "fallbacks": [
        ".ratings",
        "[class*='rating']"
      ],
      "score": 70,
      "reason": "Third-party integration class",
      "verified": true,
      "notes": "Product rating element (BazaarVoice integration). May not be present for all products."
    },
    "productLabels": {
      "name": "Product labels/badges",
      "primary": ".auc-product-tile__labels",
      "fallbacks": [
        ".product-labels",
        ".auc-product-labels"
      ],
      "score": 75,
      "reason": "BEM element naming",
      "verified": true,
      "notes": "Container for promotional badges and labels (e.g., 'Produto Nacional')"
    },
    "productMeasures": {
      "name": "Product unit/measure info",
      "primary": ".auc-product-tile__measures",
      "fallbacks": [
        ".product-measures"
      ],
      "score": 70,
      "reason": "BEM element naming",
      "verified": false,
      "notes": "Product unit information (e.g., '1L', '500g'). NOT VERIFIED with actual content."
    },
    "productNotes": {
      "name": "Product notes/description",
      "primary": ".auc-product-tile__notes",
      "fallbacks": [
        ".product-notes"
      ],
      "score": 65,
      "reason": "BEM element naming",
      "verified": false,
      "notes": "Additional product notes or description. NOT VERIFIED."
    },
    "productPromoBadges": {
      "name": "Promotional badges",
      "primary": ".auc-product-tile__promo-badges",
      "fallbacks": [
        ".promo-badges",
        "[class*='promo']"
      ],
      "score": 70,
      "reason": "BEM element naming",
      "verified": false,
      "notes": "Promotional badge container (discounts, offers, etc.). NOT VERIFIED."
    },
    "productQuantitySelector": {
      "name": "Quantity selector widget",
      "primary": ".auc-product-tile__quantity-selector",
      "fallbacks": [
        ".quantity-selector",
        "[data-pid] .auc-js-quantity-selector"
      ],
      "score": 90,
      "reason": "BEM class verified in snapshot",
      "verified": true,
      "notes": "Quantity input and +/- buttons. Contains input[name='quantity'], .quantity-plus, .quantity-minus."
    },
    "quantityInput": {
      "name": "Quantity input field",
      "primary": ".auc-product-tile__quantity-selector input[name='quantity']",
      "fallbacks": [
        ".quantity-selector input.quantity",
        "[data-pid] input.quantity-select"
      ],
      "score": 85,
      "reason": "Name attribute stable",
      "verified": true,
      "notes": "Numeric input for product quantity. Within quantity selector."
    },
    "addToCartButton": {
      "name": "Add to cart button",
      "primary": ".auc-product-tile button.auc-button__rounded--primary",
      "fallbacks": [
        "[data-pid] button.auc-button__rounded--primary",
        ".product-tile button.auc-button__circle"
      ],
      "score": 85,
      "reason": "Button class verified in snapshot",
      "verified": true,
      "notes": "Red circular button to add product to cart. Full class: 'auc-button__rounded--primary'. May be icon-only (no text).",
      "safety": "READ_ONLY_DISCOVERY"
    },
    "wishlistButton": {
      "name": "Add to wishlist button",
      "primary": ".auc-product__add-to-wishlist__button",
      "fallbacks": [
        ".auc-js-product-add-to-wishlist",
        "[class*='wishlist']"
      ],
      "score": 75,
      "reason": "BEM naming with JS hook fallback",
      "verified": true,
      "notes": "Add to wishlist button within product tile"
    },
    "outOfStockIndicator": {
      "name": "Out of stock indicator",
      "primary": ".auc-product-tile.out-of-stock",
      "fallbacks": [
        "[data-pid][data-availability='false']",
        ".product-tile:has-text('Esgotado')",
        ".product-tile:has-text('Indisponível')",
        ".auc-product-tile button[disabled]"
      ],
      "score": 70,
      "reason": "Pattern needs verification - not observed in current snapshot",
      "verified": false,
      "notes": "HYPOTHESIS: Out-of-stock products likely have disabled add-to-cart button or specific text ('Esgotado', 'Indisponível'). Needs verification with unavailable product. Screenshot shows all products available."
    },
    "sortDropdown": {
      "name": "Sort order dropdown",
      "primary": ".auc-search__sort-order-menu",
      "fallbacks": [
        "[class*='sort']"
      ],
      "score": 70,
      "reason": "BEM naming",
      "verified": false,
      "notes": "Dropdown to change sort order (price, name, etc.). NOT VERIFIED."
    },
    "filterSection": {
      "name": "Filter/refinement section",
      "primary": ".auc-search__filters-body",
      "fallbacks": [
        ".auc-search__left-section",
        "[class*='filter']"
      ],
      "score": 70,
      "reason": "BEM naming",
      "verified": false,
      "notes": "Left sidebar with category, price, brand filters. NOT VERIFIED."
    }
  },
  "navigation": {
    "toProductDetail": {
      "description": "Navigate to product detail page",
      "action": "click",
      "selector": "productLink (within productTile)",
      "waitFor": "domcontentloaded",
      "expectedUrl": "^https://(www\\.)?auchan\\.pt/pt/.*\\.html$"
    },
    "addToCart": {
      "description": "Add product to cart from search results",
      "action": "click",
      "selector": "addToCartButton (within productTile)",
      "waitFor": "networkidle or modal appearance",
      "notes": "May trigger modal or inline confirmation. Check for cart count update."
    }
  },
  "extraction": {
    "searchMetadata": {
      "description": "Extract search metadata",
      "fields": {
        "query": "searchKeywords (text content)",
        "totalResults": "resultsCount (parse number from text, e.g., '1,059 resultados para')",
        "currentPage": "URL parameter 'start' or 'page'"
      }
    },
    "searchResults": {
      "description": "Extract all visible product search results",
      "container": "resultsContainer",
      "item": "productTile",
      "fields": {
        "pid": "data-pid attribute (string)",
        "name": "productName text content",
        "price": "productPrice text content (parse '0,86 €' → 0.86)",
        "pricePromo": "productPricePromo text content (if exists)",
        "unitPrice": "productPriceUnit text content (e.g., '€0,86/L')",
        "imageUrl": "productImage src attribute",
        "imageAlt": "productImage alt attribute",
        "productUrl": "data-urls attribute -> productUrl JSON field OR productLink href",
        "addToCartUrl": "data-urls attribute -> addToCartUrl JSON field",
        "position": "data-position attribute (number)",
        "brand": "data-gtm attribute -> brand JSON field",
        "category": "data-gtm attribute -> category JSON field",
        "available": "NOT(outOfStockIndicator present) AND addToCartButton:not([disabled])",
        "hasRating": "productRating (boolean - exists check)"
      }
    },
    "productAvailability": {
      "description": "Check if a specific product is available",
      "item": "productTile[data-pid='<PID>']",
      "fields": {
        "available": "addToCartButton is enabled",
        "outOfStock": "outOfStockIndicator present OR addToCartButton disabled"
      }
    }
  },
  "api": {
    "addToCartEndpoint": "/on/demandware.store/Sites-AuchanPT-Site/pt_PT/Cart-AddProduct",
    "updateQuantityEndpoint": "/on/demandware.store/Sites-AuchanPT-Site/pt_PT/Cart-UpdateQuantity",
    "removeFromCartEndpoint": "/on/demandware.store/Sites-AuchanPT-Site/pt_PT/Cart-RemoveProductLineItem",
    "quantitySelectorEndpoint": "/on/demandware.store/Sites-AuchanPT-Site/pt_PT/Product-QuantitySelector",
    "notes": "Endpoints found in data-urls attribute of product tiles (JSON format)"
  },
  "knownIssues": [
    {
      "issue": "Out-of-stock indicator not verified",
      "severity": "medium",
      "description": "Need to verify selector for unavailable products. Current hypothesis is disabled button or 'Esgotado'/'Indisponível' text.",
      "workaround": "Check if addToCartButton is disabled or missing"
    },
    {
      "issue": "Lazy loading of products",
      "severity": "low",
      "description": "Products load as you scroll. Need scroll-to-load logic to capture all results beyond initial 24.",
      "workaround": "Scroll down page incrementally and wait for new products to appear"
    },
    {
      "issue": "Cookie consent popup",
      "severity": "low",
      "description": "Cookie consent banner may block interactions on first visit",
      "workaround": "Dismiss with auto-popup-dismisser utility or force clicks"
    }
  ]
}
