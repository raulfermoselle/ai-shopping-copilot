---
description: Create a new sprint with proper structure
---

# Create New Sprint

This command creates a new sprint folder with templates and updates the index files.

**Framework Version:** 2.0.0 (Branch-Based Concurrent Sprints)

## Usage

```
/sprint-new [name]
```

Example:
```
/sprint-new user-authentication
```

> **Note**: Sprint number is auto-assigned per branch. Branch is auto-detected from git.

---

## Sprint Creation Process (v2.0)

### Step 1: Detect Current Branch

```bash
git branch --show-current
```

**Branch transformation rules:**
1. Strip prefixes: `feat/`, `feature/`, `fix/`, `bugfix/`, `hotfix/`, `chore/`, `refactor/`
2. Take first 2-3 meaningful segments
3. Truncate to ~20 chars max

**Examples:**
| Git Branch | Branch Short |
|------------|--------------|
| `feat/user-authentication` | `user-auth` |
| `fix/bug-123-login` | `bug-123` |
| `feature/api-v2` | `api-v2` |
| `main` | `main` |
| `master` | `master` |
| `develop` | `dev` |

### Step 2: Determine Sprint Number

Check existing sprints in the branch namespace:
```
Sprints/Active/{BRANCH_SHORT}/Sprint-{BRANCH_SHORT}-XX-*/
```

Next number = highest existing + 1 (or 01 if none exist)

### Step 3: Create Sprint Structure

```
Sprints/Active/{BRANCH_SHORT}/Sprint-{BRANCH_SHORT}-{NUMBER:02d}-{NAME}/
├── SPRINT-PLAN.md
└── SPRINT-LOG.md
```

**Example:**
```
Sprints/Active/user-auth/Sprint-user-auth-01-login/
├── SPRINT-PLAN.md
└── SPRINT-LOG.md
```

### Step 4: Initialize Local State File

Create/update `Sprints/.sprint-state.local`:

```yaml
# Auto-generated by sprint tools - do not edit manually
branch: feat/user-authentication
branch_short: user-auth
active_sprint: Sprint-user-auth-01-login
sprint_path: Active/user-auth/Sprint-user-auth-01-login
session_id: {random 6 chars}
deadlock_counter: 0
last_task: null
created: 2026-01-06T10:30:00Z
last_updated: 2026-01-06T10:30:00Z
```

> **Important**: This file is gitignored to prevent merge conflicts.

### Step 5: Update Index Files

**SPRINT-INDEX.md** - Add new row:
```markdown
| Sprint-user-auth-01-login | feat/user-auth | 2026-01-06 | Active | - |
```

**MASTER-SPRINT.md** - Add/update row in "Active Sprints by Branch":
```markdown
| feat/user-auth | Sprint-user-auth-01-login | Active | 2026-01-06 | 2026-01-06 |
```

---

## Sprint Types (Multi-Module Mode)

| Type | Prefix | Use Case |
|------|--------|----------|
| Research | R | API research, discovery |
| Architecture | A | Design, planning |
| Implementation | I | Coding, features |
| Documentation | D | Docs, examples |
| Bug Fix | B | Defect fixes |
| Hotfix | H | Emergency patches |

---

## Sprint Naming Convention (v2.0)

**Pattern:** `Sprint-{BRANCH_SHORT}-{NUMBER:02d}-{NAME}`

**Examples:**
```
Sprint-user-auth-01-login
Sprint-user-auth-02-api
Sprint-api-v2-01-endpoints
Sprint-bug-123-01-fix
Sprint-main-01-hotfix
Sprint-dev-03-refactor
```

---

## Task Guidelines

When creating sprint tasks:

1. **Maximum 5-7 tasks per sprint**
2. Each task should be completable in one context session
3. Tasks should be atomic and well-defined
4. Include clear success criteria

---

## Sprint Plan Template

The SPRINT-PLAN.md will include:

```markdown
# Sprint-{BRANCH_SHORT}-{NUMBER} - {NAME}

**Branch:** {full branch name}
**Created:** {date}
**Status:** Active

## Sprint Goals
### Primary Objectives
1. [ ] Objective 1
2. [ ] Objective 2

## Task Breakdown (Max 5-7 Tasks)
| ID | Task | Priority | Status |
|----|------|----------|--------|
| T001 | Task description | HIGH | PENDING |
| T002 | Task description | MEDIUM | PENDING |

## Dependencies
- Previous sprint completed
- Required resources available

## Technical Notes
- Key implementation details
- Testing requirements
```

---

## After Creation

Once sprint is created:

1. Edit SPRINT-PLAN.md to define specific tasks
2. Review and adjust objectives
3. Ensure dependencies are documented
4. Use `/sprint-start` to begin work

---

## Concurrent Development Notes

**Multiple developers can create sprints simultaneously:**
- Each branch has its own sprint namespace
- No sprint number conflicts across branches
- Local state file prevents shared state conflicts
- Merging is straightforward (append-only indexes)

**Example - Two developers working simultaneously:**
```
Developer A (feat/user-auth):
  -> Sprint-user-auth-01-login

Developer B (feat/api-v2):
  -> Sprint-api-v2-01-endpoints

No conflicts!
```

---

## Legacy Mode

For backward compatibility with v1.x projects:

```bash
python scripts/new_sprint.py --legacy --number 03 --name "sprint-name"
```

This creates sprints with the old pattern: `Sprint-03-sprint-name`
