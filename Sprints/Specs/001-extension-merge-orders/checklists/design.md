# Checklist: Design - Extension Button: Merge Last 3 Orders

<!--
  Generated by /speckit-plan
  Template: checklist-template.md
  Purpose: Validate implementation plan before task generation
-->

| Field | Value |
|-------|-------|
| Created | 2026-01-17 |
| Feature | 001-extension-merge-orders |
| Type | design |
| Related Docs | [spec.md](../spec.md), [plan.md](../plan.md), [research.md](../research.md) |

---

## Instructions

- Mark items complete with `[x]`
- Add inline comments after items if needed
- Reference CHK numbers for tracking
- This checklist validates plan.md before task generation

---

## Design Checklist

> Validate implementation plan before task generation.

### Technical Context
- [x] CHK015: Technology stack documented - TypeScript, Chrome MV3, esbuild, Vitest
- [x] CHK016: Dependencies listed with versions - All existing, no new deps
- [x] CHK017: Project structure defined - File changes mapped
- [x] CHK018: Complexity justified where applicable - Multi-order loop necessary per spec

### Constitution Alignment
- [x] CHK019: Library-first principle applied - Reusing 90% existing infrastructure
- [x] CHK020: Test-first approach confirmed - FakeAdapters for unit tests, integration tests planned
- [x] CHK021: Simplicity principle followed - Minimal new code, no new abstractions
- [x] CHK022: Integration-first testing planned - Content scripts tested against real DOM patterns

### Data Model
- [x] CHK023: All entities defined - Spec entities map to existing types
- [x] CHK024: Relationships documented - In spec.md Section 3
- [x] CHK025: Constraints specified - In spec.md entity tables
- [x] CHK026: Indexes identified for performance - N/A (no database)

### API Contracts
- [x] CHK027: All endpoints documented - Internal message protocol documented
- [x] CHK028: Request/response formats defined - Message types in extension/src/types/messages.ts
- [x] CHK029: Error responses specified - US4 error scenarios mapped
- [x] CHK030: Authentication requirements documented - N/A (no auth, uses Auchan.pt session)

---

## Extension-Specific Design Checks

### Architecture Compliance
- [x] CHK-EXT-D001: No Chrome imports in core/ - Verified, only adapters touch Chrome APIs
- [x] CHK-EXT-D002: State persistence strategy - chrome.storage.session, already implemented
- [x] CHK-EXT-D003: Service worker recovery - Existing recovery handles restart
- [x] CHK-EXT-D004: Content script stateless - Extractors are pure functions

### UI/UX Design
- [x] CHK-UX-D001: Popup layout fits 320px - Sections stacked, responsive
- [x] CHK-UX-D002: Progress feedback clear - Progress bar + text + step counter
- [x] CHK-UX-D003: Error messages user-friendly - Mapped in plan Section 9
- [x] CHK-UX-D004: Results actionable - "View Cart" button to Auchan.pt

### Safety Design
- [x] CHK-SAF-D001: No checkout code paths - Cart phase stops at scan, no payment
- [x] CHK-SAF-D002: State machine terminal is review - Verified in state-machine.ts
- [x] CHK-SAF-D003: No auto-purchase functions - Safety assertion in service worker

---

## Checklist Summary

| Category | Total | Complete | Remaining |
|----------|-------|----------|-----------|
| Technical Context | 4 | 4 | 0 |
| Constitution | 4 | 4 | 0 |
| Data Model | 4 | 4 | 0 |
| API Contracts | 4 | 4 | 0 |
| Extension Architecture | 4 | 4 | 0 |
| UI/UX Design | 4 | 4 | 0 |
| Safety Design | 3 | 3 | 0 |
| **Total** | **27** | **27** | **0** |

---

## Sprint Readiness

| Criterion | Status |
|-----------|--------|
| Spec complete | Yes |
| Research complete | Yes |
| Plan complete | Yes |
| Requirements checklist | 24/25 (1 deferred) |
| Design checklist | 27/27 |
| **Ready for `/speckit-tasks`** | **Yes** |

---

<!-- SPECKIT METADATA - DO NOT EDIT BELOW -->
```yaml
speckit:
  version: "1.0"
  template: "checklist-template"
  type: "design"
  feature_id: "001-extension-merge-orders"
  items:
    total: 27
    complete: 27
    technical: 4
    constitution: 4
    data_model: 4
    api_contracts: 4
    extension: 4
    ux: 4
    safety: 3
  status: complete
  sprint_ready: true
```
